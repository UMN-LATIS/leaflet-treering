<!DOCTYPE htmml>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1">
	<title>Tree Rings</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
    <link rel="stylesheet" href="node_modules/font-awesome-4.7.0/css/font-awesome.css">

    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap-theme.min.css" >

    <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css">
    <link rel="stylesheet" href="node_modules/leaflet-fullscreen/dist/leaflet.fullscreen.css">
    <link rel="stylesheet" href="node_modules/leaflet-minimap/dist/Control.MiniMap.min.css" />
    <link rel="stylesheet" href="node_modules/leaflet-easybutton/src/easy-button.css" />
    <link rel="stylesheet" href="node_modules/leaflet-dialog/Leaflet.Dialog.css">

    <link rel="stylesheet" href="style.css">

    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/jszip/dist/jszip.min.js"></script>
    <script src="node_modules/file-saver/FileSaver.min.js"></script>

    <script src="node_modules/leaflet/dist/leaflet.js"></script>
    <script src="node_modules/leaflet-fullscreen/dist/Leaflet.fullscreen.js"></script>
    <script src="node_modules/leaflet-minimap/dist/Control.MiniMap.min.js"></script>
    <script src="node_modules/leaflet-easybutton/src/easy-button.js"></script>
    <script src="node_modules/leaflet-dialog/Leaflet.Dialog.js"></script>

    <script src="Leaflet.elevator.js"></script>
</head>

<body>
    <div id="map_container"><div id="imageMap"></div></div>
</body>
</html>
<script type="application/javascript" src="leaflet-treering.js"></script>

<script>
    var src;
    var map = L.map('imageMap', {
        fullscreenControl: true,
        zoomSnap: 0,
        crs: L.CRS.Simple,
        drawControl: true,
        layers: [],
        doubleClickZoom: false,
        zoomControl: false,
        trackResize: true
    }).setView([0, 0], 0);

    var layer = L.tileLayer.elevator(function(coords, tile, done) {
        var error;
        var params = {Bucket: 'elevator-assets', Key: "sample_cores/ccs134a/tiledBase_files/" + coords.z + "/" + coords.x + "_" + coords.y + ".jpeg"};
        tile.onload = (function(done, error, tile) {
            return function() {
                done(error, tile);
            }
        })(done, error, tile);
        tile.src = "https://s3.amazonaws.com/" + params.Bucket + "/" + params.Key;
        //tile.src = params.Key;
        src = tile.src;
        return tile.src;
    },
    {
				width: 74901,
        height: 3856,
        tileSize :254,
        maxNativeZoom: 18,
        maxZoom: 18,
        overlap: 1,
        pixelsPerMillimeter: 480, //(NEW)
        lineColor: 'blue'
    }).addTo(map);
		
    //map, basepath, {ppm: int, saveURL: string, savePermission: bool, popoutUrl: string, assetName: string, hasLatewood: bool, initialData: json}
		//basepath is the local image folder location (i.e. replace "" with "file:///C:/Users/.../leaflet-treering")
		var treering = new LTreering(map, "", {'savePermission': true, 'saveURL': '/test', 'ppm':
    468, 'popoutUrl': "CCS134A_backwards_annual.html", 'assetName': "CCS134A", 'hasLatewood': true,
    'initialData': {"SaveDate":{"day":21,"hour":12,"year":2018,"month":6,"minute":48},"year":1927,"forwardDirection":false,"subAnnual":false,"earlywood":false,"index":100,"points":[{"start":true,"skip":false,"break":false,"latLng":{"lat":-0.014747152821225391,"lng":0.5352432506810166}},{"start":false,"skip":false,"break":false,"year":2018,"earlywood":false,"latLng":{"lat":-0.01515332440316592,"lng":0.5304288420464903}},{"start":false,"skip":false,"break":false,"year":2017,"earlywood":false,"latLng":{"lat":-0.015403276145898554,"lng":0.5268045417768672}},{"start":false,"skip":false,"break":false,"year":2016,"earlywood":false,"latLng":{"lat":-0.015746959792155926,"lng":0.5221804345363135}},{"start":false,"skip":false,"break":false,"year":2015,"earlywood":false,"latLng":{"lat":-0.016090643438413297,"lng":0.5178375230063339}},{"start":false,"skip":false,"break":false,"year":2014,"earlywood":false,"latLng":{"lat":-0.016528058988195406,"lng":0.5128384881516813}},{"start":false,"skip":false,"break":false,"year":2013,"earlywood":false,"latLng":{"lat":-0.016809254698769618,"lng":0.5088705042358007}},{"start":false,"skip":false,"break":false,"year":2012,"earlywood":false,"latLng":{"lat":-0.017059206441502252,"lng":0.5051212280948112}},{"start":false,"skip":false,"break":false,"year":2011,"earlywood":false,"latLng":{"lat":-0.017428773193054903,"lng":0.5018637262855746}},{"start":false,"skip":false,"break":false,"year":2010,"earlywood":false,"latLng":{"lat":-0.01780629174597306,"lng":0.49903233713868844}},{"start":true,"skip":false,"break":false,"latLng":{"lat":-0.011734333094980304,"lng":0.4984834962848364}},{"start":false,"skip":false,"break":true,"latLng":{"lat":-0.011869729246076231,"lng":0.49688130849686796}},{"start":true,"skip":false,"break":false,"latLng":{"lat":-0.011869729246076231,"lng":0.49595610146437913}},{"start":false,"skip":false,"break":false,"year":2009,"earlywood":false,"latLng":{"lat":-0.01195999334680685,"lng":0.4945795739282372}},{"start":false,"skip":false,"break":false,"year":2008,"earlywood":false,"latLng":{"lat":-0.012095389497902776,"lng":0.4907207836220033}},{"start":false,"skip":false,"break":false,"year":2007,"earlywood":false,"latLng":{"lat":-0.012321049749729321,"lng":0.48688455934095204}},{"start":false,"skip":false,"break":false,"year":2006,"earlywood":false,"latLng":{"lat":-0.01268210615265179,"lng":0.48261958058143034}},{"start":false,"skip":false,"break":false,"year":2005,"earlywood":false,"latLng":{"lat":-0.013020596530391608,"lng":0.4786479601492832}},{"start":false,"skip":false,"break":false,"year":2004,"earlywood":false,"latLng":{"lat":-0.013404218958496732,"lng":0.4749696980445105}},{"start":false,"skip":false,"break":false,"year":2003,"earlywood":false,"latLng":{"lat":-0.013720143311053895,"lng":0.47122373786418986}},{"start":false,"skip":false,"break":false,"year":2002,"earlywood":false,"latLng":{"lat":-0.014103765739159021,"lng":0.4672069853816774}},{"start":false,"skip":false,"break":false,"year":2001,"earlywood":false,"latLng":{"lat":-0.0145099541924468,"lng":0.4625358181688679}},{"start":false,"skip":false,"break":false,"year":2000,"earlywood":false,"latLng":{"lat":-0.015141802897561124,"lng":0.456916877898387}},{"start":false,"skip":false,"break":false,"year":1999,"earlywood":false,"latLng":{"lat":-0.015480293275300941,"lng":0.4526293331136826}},{"start":false,"skip":false,"break":false,"year":1998,"earlywood":false,"latLng":{"lat":-0.015818783653040756,"lng":0.4490639011348232}},{"start":false,"skip":false,"break":false,"year":1997,"earlywood":false,"latLng":{"lat":-0.016112141980415266,"lng":0.4449568845515801}},{"start":false,"skip":false,"break":false,"year":1996,"earlywood":false,"latLng":{"lat":-0.016360368257424464,"lng":0.4400149250365788}},{"start":false,"skip":false,"break":false,"year":1995,"earlywood":false,"latLng":{"lat":-0.016834254786260206,"lng":0.4347344751438377}},{"start":false,"skip":false,"break":false,"year":1994,"earlywood":false,"latLng":{"lat":-0.01721787721436533,"lng":0.4282580259164158}},{"start":false,"skip":false,"break":false,"year":1993,"earlywood":false,"latLng":{"lat":-0.01746610349137453,"lng":0.42378995293025024}},{"start":false,"skip":false,"break":false,"year":1992,"earlywood":false,"latLng":{"lat":-0.017782027843931694,"lng":0.41968293634700715}},{"start":false,"skip":false,"break":false,"year":1991,"earlywood":false,"latLng":{"lat":-0.01827848039795009,"lng":0.414470184529814}},{"start":false,"skip":false,"break":false,"year":1990,"earlywood":false,"latLng":{"lat":-0.018549272700141943,"lng":0.41016007371992697}},{"start":false,"skip":false,"break":false,"year":1989,"earlywood":false,"latLng":{"lat":-0.018887763077881762,"lng":0.4064141135396063}},{"start":false,"skip":false,"break":false,"year":1988,"earlywood":false,"latLng":{"lat":-0.01920368743043892,"lng":0.40061464506766414}},{"start":false,"skip":false,"break":false,"year":1987,"earlywood":false,"latLng":{"lat":-0.01976783806000528,"lng":0.3936417432862239}},{"start":false,"skip":false,"break":false,"year":1986,"earlywood":false,"latLng":{"lat":-0.020354554714754298,"lng":0.3866688415047837}},{"start":true,"skip":false,"break":false,"latLng":{"lat":-0.010696295936578202,"lng":0.38614982292558264}},{"start":false,"skip":false,"break":false,"year":1985,"earlywood":false,"latLng":{"lat":-0.011079918364683326,"lng":0.3806211467558323}},{"start":false,"skip":false,"break":false,"year":1984,"earlywood":false,"latLng":{"lat":-0.01155380489351907,"lng":0.37608537569411876}},{"start":false,"skip":false,"break":false,"year":1983,"earlywood":false,"latLng":{"lat":-0.011982559371989504,"lng":0.37148190655685726}},{"start":false,"skip":false,"break":false,"year":1982,"earlywood":false,"latLng":{"lat":-0.012230785648998703,"lng":0.367058965621057}},{"start":false,"skip":false,"break":false,"year":1981,"earlywood":false,"latLng":{"lat":-0.01236618180009463,"lng":0.36227496828233424}},{"start":false,"skip":false,"break":false,"year":1980,"earlywood":false,"latLng":{"lat":-0.012772370253382409,"lng":0.35791972542208195}},{"start":false,"skip":false,"break":false,"year":1979,"earlywood":false,"latLng":{"lat":-0.013291388832583462,"lng":0.35322599218408984}},{"start":false,"skip":false,"break":false,"year":1978,"earlywood":false,"latLng":{"lat":-0.013900671512515131,"lng":0.34862252304682834}},{"start":false,"skip":false,"break":false,"year":1977,"earlywood":false,"latLng":{"lat":-0.014284293940620255,"lng":0.3446734686398638}},{"start":false,"skip":false,"break":false,"year":1976,"earlywood":false,"latLng":{"lat":-0.014532520217629455,"lng":0.3406341501321687}},{"start":false,"skip":false,"break":false,"year":1975,"earlywood":false,"latLng":{"lat":-0.015028972771647851,"lng":0.3355793604912541}},{"start":false,"skip":false,"break":false,"year":1974,"earlywood":false,"latLng":{"lat":-0.015502859300483595,"lng":0.33126924968136706}},{"start":false,"skip":false,"break":false,"year":1973,"earlywood":false,"latLng":{"lat":-0.015999311854501992,"lng":0.3274104593751332}},{"start":false,"skip":false,"break":false,"year":1972,"earlywood":false,"latLng":{"lat":-0.016157274030780575,"lng":0.3236870652199952}},{"start":false,"skip":false,"break":false,"year":1971,"earlywood":false,"latLng":{"lat":-0.016676292609981627,"lng":0.3197605768382133}},{"start":false,"skip":false,"break":false,"year":1970,"earlywood":false,"latLng":{"lat":-0.017037349012904098,"lng":0.3143221647691936}},{"start":false,"skip":false,"break":false,"year":1969,"earlywood":false,"latLng":{"lat":-0.01746610349137453,"lng":0.3096961296067494}},{"start":false,"skip":false,"break":false,"year":1968,"earlywood":false,"latLng":{"lat":-0.017759461818749038,"lng":0.304957264318392}},{"start":false,"skip":false,"break":false,"year":1967,"earlywood":false,"latLng":{"lat":-0.01816565027203682,"lng":0.3001958330048519}},{"start":false,"skip":false,"break":false,"year":1966,"earlywood":false,"latLng":{"lat":-0.018504140649776634,"lng":0.2947122888854669}},{"start":false,"skip":false,"break":false,"year":1965,"earlywood":false,"latLng":{"lat":-0.019068291279342994,"lng":0.2875137268522001}},{"start":true,"skip":false,"break":false,"latLng":{"lat":-0.010876824138039436,"lng":0.2857987089383184}},{"start":false,"skip":false,"break":false,"year":1964,"earlywood":false,"latLng":{"lat":-0.011373276692057835,"lng":0.28063108917149054}},{"start":false,"skip":false,"break":false,"year":1963,"earlywood":false,"latLng":{"lat":-0.011869729246076231,"lng":0.2751024130017402}},{"start":false,"skip":false,"break":false,"year":1962,"earlywood":false,"latLng":{"lat":-0.0124790119260079,"lng":0.26997992528527764}},{"start":false,"skip":false,"break":false,"year":1961,"earlywood":false,"latLng":{"lat":-0.013223690757035498,"lng":0.2631875517052987}},{"start":false,"skip":false,"break":false,"year":1960,"earlywood":false,"latLng":{"lat":-0.013923237537697785,"lng":0.2575686114348177}},{"start":false,"skip":false,"break":false,"year":1959,"earlywood":false,"latLng":{"lat":-0.015367463149387669,"lng":0.2474077462329628}},{"start":false,"skip":false,"break":false,"year":1958,"earlywood":false,"latLng":{"lat":-0.016292670181876502,"lng":0.2387034143821186}},{"start":false,"skip":false,"break":false,"year":1957,"earlywood":false,"latLng":{"lat":-0.016969650937356133,"lng":0.23209156900360084}},{"start":false,"skip":false,"break":false,"year":1956,"earlywood":false,"latLng":{"lat":-0.017646631692835767,"lng":0.22667572295976376}},{"start":false,"skip":false,"break":false,"year":1955,"earlywood":false,"latLng":{"lat":-0.01827848039795009,"lng":0.2210116506389175}},{"start":false,"skip":false,"break":false,"year":1954,"earlywood":false,"latLng":{"lat":-0.018549272700141943,"lng":0.21575376677135902}},{"start":true,"skip":false,"break":false,"latLng":{"lat":-0.011508672843153761,"lng":0.21219654087026074}},{"start":false,"skip":false,"break":false,"year":1953,"earlywood":false,"latLng":{"lat":-0.012614408077103827,"lng":0.20632116824500948}},{"start":false,"skip":false,"break":false,"year":1952,"earlywood":false,"latLng":{"lat":-0.013359086908131423,"lng":0.20205618948548779}},{"start":false,"skip":false,"break":false,"year":1951,"earlywood":false,"latLng":{"lat":-0.014081199713976367,"lng":0.19636955113945886}},{"start":false,"skip":false,"break":false,"year":1950,"earlywood":false,"latLng":{"lat":-0.01491614264573458,"lng":0.18826834809888593}},{"start":false,"skip":false,"break":false,"year":1949,"earlywood":false,"latLng":{"lat":-0.015480293275300941,"lng":0.17998661685685174}},{"start":false,"skip":false,"break":false,"year":1948,"earlywood":false,"latLng":{"lat":-0.015751085577492795,"lng":0.17195311189182677}},{"start":false,"skip":false,"break":false,"year":1947,"earlywood":false,"latLng":{"lat":-0.016270104156693846,"lng":0.16473198383337737}},{"start":false,"skip":false,"break":false,"year":1946,"earlywood":false,"latLng":{"lat":-0.01755636759210515,"lng":0.15202731165554292}},{"start":false,"skip":false,"break":false,"year":1945,"earlywood":false,"latLng":{"lat":-0.01827848039795009,"lng":0.13972882793099625}},{"start":true,"skip":false,"break":false,"latLng":{"lat":-0.011395842717240489,"lng":0.13803637604229715}},{"start":false,"skip":false,"break":false,"year":1944,"earlywood":false,"latLng":{"lat":-0.013020596530391608,"lng":0.12950641852325379}},{"start":false,"skip":false,"break":false,"year":1943,"earlywood":false,"latLng":{"lat":-0.014013501638428403,"lng":0.12260121481736154}},{"start":false,"skip":false,"break":false,"year":1942,"earlywood":false,"latLng":{"lat":-0.014735614444273345,"lng":0.11734333094980305}},{"start":false,"skip":false,"break":false,"year":1941,"earlywood":false,"latLng":{"lat":-0.015209500973109087,"lng":0.11348454064356914}},{"start":false,"skip":false,"break":false,"year":1940,"earlywood":false,"latLng":{"lat":-0.01568338750194483,"lng":0.10928725995959541}},{"start":false,"skip":false,"break":false,"year":1939,"earlywood":false,"latLng":{"lat":-0.016247538131511193,"lng":0.10533820555263089}},{"start":false,"skip":false,"break":false,"year":1938,"earlywood":false,"latLng":{"lat":-0.01658602850925101,"lng":0.10244975432925113}},{"start":false,"skip":false,"break":false,"year":1937,"earlywood":false,"latLng":{"lat":-0.016969650937356133,"lng":0.097756021091259}},{"start":false,"skip":false,"break":false,"year":1936,"earlywood":false,"latLng":{"lat":-0.017398405415826566,"lng":0.0929043256769883}},{"start":false,"skip":false,"break":false,"year":1935,"earlywood":false,"latLng":{"lat":-0.017827159894297003,"lng":0.08927119562258094}},{"start":false,"skip":false,"break":false,"year":1934,"earlywood":false,"latLng":{"lat":-0.018323612448315398,"lng":0.08444206623349289}},{"start":true,"skip":false,"break":false,"latLng":{"lat":-0.01042960667326691,"lng":0.08213417779520173}},{"start":false,"skip":false,"break":false,"year":1933,"earlywood":false,"latLng":{"lat":-0.011395842717240489,"lng":0.07760456060314859}},{"start":false,"skip":false,"break":false,"year":1932,"earlywood":false,"latLng":{"lat":-0.011937427321624195,"lng":0.07460327925385556}},{"start":false,"skip":false,"break":false,"year":1931,"earlywood":false,"latLng":{"lat":-0.012738060769848951,"lng":0.07155247115884689}},{"start":false,"skip":false,"break":false,"year":1930,"earlywood":false,"latLng":{"lat":-0.013989822806178007,"lng":0.06658477948061539}},{"start":false,"skip":false,"break":false,"year":1929,"earlywood":false,"latLng":{"lat":-0.015345238164562037,"lng":0.06053381805925813}},{"start":false,"skip":false,"break":false,"year":1928,"earlywood":false,"latLng":{"lat":-0.016482818911777202,"lng":0.055789864304914026}}, null],"annotations":{}}});
treering.loadInterface();
</script>
